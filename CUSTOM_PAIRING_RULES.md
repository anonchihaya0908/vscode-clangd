# 自定义配对规则功能说明

## 功能概述

这个功能允许用户为 C/C++ 文件创建自定义的源文件/头文件配对规则。当用户调用 "New Source/Header Pair" 命令时，扩展会：

1. 检测当前语言环境（C 或 C++）
2. 查找是否存在自定义的配对规则
3. 如果没有找到，询问用户是否要创建自定义规则
4. 提供常见的文件扩展名组合供选择（如 .cc/.hh）
5. 将配对规则保存到工作区或全局设置中

## 使用流程

### 1. 创建文件对时的自动检测

当您使用 `Ctrl+Shift+P` 打开命令面板并执行 "clangd: New Source/Header Pair" 命令时：

- 如果已存在自定义规则，会显示可用的自定义规则供选择
- 如果没有自定义规则，会询问是否要创建
- 可以选择使用默认规则或创建新的自定义规则

### 2. 自定义规则创建

在创建自定义规则时，您可以选择：

#### C++ 语言选项：
- `.h / .cpp` (默认)
- `.hh / .cc` (替代方案)
- `.hpp / .cpp` (Header Plus Plus)
- `.hxx / .cxx` (扩展格式)
- 自定义扩展名

#### C 语言选项：
- `.h / .c` (默认)
- 自定义扩展名

#### 保存位置：
- **工作区设置**：仅在当前工作区生效
- **全局设置**：在所有工作区都生效

### 3. 管理现有规则

使用 "clangd: Configure Source/Header Pairing Rules" 命令可以：
- 编辑工作区配对规则
- 重置工作区配对规则
- 编辑全局配对规则
- 重置全局配对规则

## 配置文件示例

自定义规则会被保存到 `settings.json` 中：

```json
{
  "clangd.createPair.rules": [
    {
      "key": "custom_cpp_1640000000000",
      "label": "Custom C++ Pair (.hh/.cc)",
      "description": "Creates a .hh/.cc file pair with header guards.",
      "language": "cpp",
      "headerExt": ".hh",
      "sourceExt": ".cc"
    }
  ]
}
```

## 优先级

配对规则的优先级按以下顺序：
1. 工作区自定义规则（最高优先级）
2. 全局自定义规则
3. 内置默认规则（最低优先级）

## 使用场景

这个功能特别适用于：
- 使用非标准文件扩展名的项目（如 .cc/.hh）
- 需要在不同项目中使用不同命名约定的开发者
- 团队项目中需要统一文件扩展名规范

## 注意事项

- 自定义规则仅影响 "New Source/Header Pair" 命令
- 不会影响已存在的文件或其他扩展功能
- 工作区设置会覆盖全局设置
- 重置规则会删除所有自定义配置，回到默认行为
